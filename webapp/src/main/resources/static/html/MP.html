<!DOCTYPE html>
<html lang="en">
<head>
    <title>three.js webgl - materials</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link type="text/css" rel="stylesheet" href="https://threejs.org/examples/main.css">
</head>
<body>

<script type="module">

    import * as THREE from '/js/three.module.js';
    import {OrbitControls} from 'https://threejs.org/examples/jsm/controls/OrbitControls.js';
    // import {Vector3} from "../js/three.module";
    // import { RectAreaLightUniformsLib } from 'https://threejs.org/examples/jsm/lights/RectAreaLightUniformsLib.js';
    // import {Vector3} from "../js/three.module";

    var container, stats;

    var camera, scene, renderer, room;
    var leftOffset = 235;
    var rightOffset = 240;
    var facadeOffset = 2;
    var socle = 100;
    var planeWidth = 18;
    var facadeWidth = 18.5;
    var dwpWidth = 4;
    var roomAngle = Math.PI / 180 * 136.8;
    // roomAngle = Math.PI / 180 * 135;

    var wireframe = false;
    var transparent = false;
    var opacity = 0.5;
    var visibility = {
        "kargo": 1,
        "fridge": 1,
        "owen": 1,
        "washBasin": 1,
        "washMashine": 1,
        "socle": 1,
        "topPlane1": 1,
        "topPlane2": 1,
        "topConner": 1,
        "topLeft": 1,
        "topRight": 1,
        "walls": 1,
        "floor": 1,
        "cooker": 1,
        "balconyBox": 1
    };


    // var textureCubanit = new THREE.TextureLoader().load('/img/Cubanit.jpg');
    // var textureTop = new THREE.TextureLoader().load('/img/top.jpg');
    // var textureFacade = new THREE.TextureLoader().load('/img/saviola.jpg');
    // var cleafFacade = new THREE.TextureLoader().load('/img/cleaf.jpg');
    // var textureWood1Facade = new THREE.TextureLoader().load('/img/wood1.jpg');
    // var textureWood2Facade = new THREE.TextureLoader().load('/img/wood2.jpg');
    // textureTop.wrapS = textureTop.wrapT = THREE.RepeatWrapping;
    // textureTop.repeat.set(2, 5);
    // cleafFacade.wrapS = textureTop.wrapT = THREE.RepeatWrapping;
    // cleafFacade.repeat.set(1, 3);
    // var facadeMaterial = new THREE.MeshStandardMaterial({map: textureFacade, roughness: 1, wireframe: wireframe});
    // var facadeMaterial = new THREE.MeshStandardMaterial({wireframe: wireframe, opacity: opacity, transparent: transparent, map: cleafFacade});
    // // var facadeMaterial = new THREE.MeshStandardMaterial({map: cleafFacade});
    // var facadeWood1Material = new THREE.MeshStandardMaterial({map: textureWood2Facade, roughness: 1, wireframe: wireframe, opacity: opacity, transparent: transparent});
    // var facadeWood2Material = new THREE.MeshStandardMaterial({map: textureWood1Facade, roughness: 1, wireframe: wireframe, opacity: opacity, transparent: transparent});
    // var facadeCubanitMaterial = new THREE.MeshStandardMaterial({map: textureCubanit, roughness: 1, wireframe: wireframe, opacity: opacity, transparent: transparent});
    // var owenMat = new THREE.MeshStandardMaterial({wireframe: wireframe, opacity: opacity, transparent: transparent, map: textureCubanit});
    // var socleMaterial = new THREE.MeshStandardMaterial({color: 0x666666, roughness: 1, wireframe: false, opacity: opacity, transparent: transparent});
    // var topMaterial = new THREE.MeshStandardMaterial({map: textureTop, wireframe: wireframe});
    // var topMaterial = new THREE.MeshStandardMaterial({wireframe: wireframe, opacity: opacity, transparent: transparent, /*map: textureTop*/color: 0xFFFFFF});
    // facadeMaterial = new THREE.MeshBasicMaterial({color: 0x777777, wireframe: true});

    var objects = [];
    var controls;
    var spotLight, lightHelper, shadowCameraHelper;

    init();
    animate();

    function init() {

        container = document.createElement('div');
        document.body.appendChild(container);

        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 10, 30000);
        camera.position.set(0, 4000, 10000);

        scene = new THREE.Scene();
        room = new THREE.Object3D();

        createRoom();

        // Lights
        // var ambient = new THREE.AmbientLight( 0xffffff, 0.8 );
        // scene.add( ambient );

        let sphereLight = new THREE.HemisphereLight(0xffffbb, 0xaaaabb, 1.7);
        scene.add(sphereLight);

        // var light1 = new THREE.DirectionalLight(0xffffff, 0.9);
        // light1.position.set(100, 100, 100);
        // light1.castShadow = true;
        // scene.add(light1);

        spotLight = new THREE.SpotLight(0xffffff, 3);
        spotLight.position.set(1000, 8000, 2000);
        spotLight.angle = Math.PI / 4;
        spotLight.penumbra = 0.4;
        spotLight.decay = 1;
        spotLight.distance = 14000;

        spotLight.castShadow = true;
        spotLight.shadow.mapSize.width = 4096;
        spotLight.shadow.mapSize.height = 4096;
        spotLight.shadow.camera.near = 400;
        spotLight.shadow.camera.far = 3000;
        scene.add(spotLight);

        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        container.appendChild(renderer.domElement);

        window.addEventListener('resize', onWindowResize, false);

        // controls
        controls = new OrbitControls(camera, renderer.domElement);
        controls.maxPolarAngle = Math.PI * 0.5;
        controls.minDistance = 100;
        controls.maxDistance = 30000;
    }

    function createRoom() {
        // let textureFlor = new THREE.TextureLoader().load('/img/floor.jpg');
        // textureFlor.wrapS = textureFlor.wrapT = THREE.RepeatWrapping;
        // textureFlor.repeat.set(3, 3);
        // let wallMidSize = 160 + 600 + 600 + leftOffset + 3;
        let wallMat = new THREE.MeshStandardMaterial({color: 0x777777, side: THREE.DoubleSide, wireframe: wireframe});
        let windowMat = new THREE.MeshStandardMaterial({color: 'blue', side: THREE.DoubleSide, wireframe: true});
        let wallWentLength = 1765 + 100;
        let wallWentWidth = 513 + 120;
        let height = 2700;

        let origin = new THREE.Object3D();
        origin.position.y = height / 2;
        addItem(room, origin);

        let wallWent = new THREE.Mesh(new THREE.BoxGeometry(wallWentLength, height, wallWentWidth), wallMat);
        wallWent.position.x = wallWentLength / 2;
        wallWent.position.z = wallWentWidth / 2;
        addItem(origin, wallWent);

        let wallCenter1 = new THREE.Mesh(new THREE.BoxGeometry(280, height, 360), wallMat);
        wallCenter1.position.x = 280 / 2;
        wallCenter1.position.z = -360 / 2;
        addItem(origin, wallCenter1);

        let wallCenter2 = new THREE.Mesh(new THREE.BoxGeometry(100, height, 300), wallMat);
        wallCenter2.position.x = 280 - 100 / 2;
        wallCenter2.position.z = -360 - 300 / 2;
        addItem(origin, wallCenter2);

        let wallCenter3 = new THREE.Mesh(new THREE.BoxGeometry(100, height - 2075, 914), wallMat);
        wallCenter3.position.y = height / 2 - (height - 2075) / 2;
        wallCenter3.position.x = 280 - 100 / 2;
        wallCenter3.position.z = -360 - 300 - 914 / 2;
        addItem(origin, wallCenter3);

        let wallRoom1 = new THREE.Mesh(new THREE.BoxGeometry(105, height, 100), wallMat);
        wallRoom1.position.x = 280 - 105 - 100 / 2;
        wallRoom1.position.z = -360 - 300 - 914 - 100 - 100 / 2;
        addItem(origin, wallRoom1);

        let wallRoom2 = new THREE.Mesh(new THREE.BoxGeometry(904, height - 2075, 100), wallMat);
        wallRoom2.position.y = height / 2 - (height - 2075) / 2;
        wallRoom2.position.x = 280 - 105 - 100 - 904 / 2;
        wallRoom2.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2;
        addItem(origin, wallRoom2);

        let wallRoom3 = new THREE.Mesh(new THREE.BoxGeometry(400, height, 100), wallMat);
        wallRoom3.position.x = 280 - 105 - 100 - 904 - 400 / 2;
        wallRoom3.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2;
        addItem(origin, wallRoom3);

        let wallRoom4 = new THREE.Mesh(new THREE.BoxGeometry(100, height, 856 + 1250), wallMat);
        wallRoom4.position.x = 280 - 105 - 100 - 904 - 400 + 100 / 2;
        wallRoom4.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 100) / 2;
        addItem(origin, wallRoom4);

        let wallRoom5 = new THREE.Mesh(new THREE.BoxGeometry(100, height - 2075, 818), wallMat);
        wallRoom5.position.y = height / 2 - (height - 2075) / 2;
        wallRoom5.position.x = 280 - 105 - 100 - 904 - 400 + 100 / 2;
        wallRoom5.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 50) + 818 / 2;
        addItem(origin, wallRoom5);

        {
            let bathOrigin = new THREE.Object3D();
            bathOrigin.position.x = 280 - 105 - 100 - 904 - 400;
            bathOrigin.position.z = -360 - 300 - 914 - 100 - 100 + 1250 - 50;
            addItem(origin, bathOrigin);

            let bath = new THREE.Mesh(new THREE.BoxGeometry(1900, 600, 700), new THREE.MeshStandardMaterial({color: 'red', side: THREE.DoubleSide}));
            bath.position.y = -height / 2 + 600 / 2;
            bath.position.x = -1900 / 2;
            bath.position.z = 700 / 2;
            addItem(bathOrigin, bath);

            let washing = new THREE.Mesh(new THREE.BoxGeometry(500, 900, 800), new THREE.MeshStandardMaterial({color: 'blue', side: THREE.DoubleSide}));
            washing.position.y = -height / 2 + 900 / 2;
            washing.position.x = 500 / 2 - 1900;
            washing.position.z = 700 + 800 / 2;
            addItem(bathOrigin, washing);

            let toilet = new THREE.Mesh(new THREE.BoxGeometry(900, 600, 650), new THREE.MeshStandardMaterial({color: 'green', side: THREE.DoubleSide}));
            toilet.position.y = -height / 2 + 600 / 2;
            toilet.position.x = 900 / 2 - 1900;
            toilet.position.z = 700 + 800 + 650 / 2;
            addItem(bathOrigin, toilet);

            let mashMachine = new THREE.Mesh(new THREE.BoxGeometry(600, 800, 450), new THREE.MeshStandardMaterial({color: 'purple', side: THREE.DoubleSide}));
            mashMachine.position.y = -height / 2 + 800 / 2;
            mashMachine.position.x = -600 / 2 - 50;
            mashMachine.position.z = 700 + 800 + 450 / 2 + 530;
            addItem(bathOrigin, mashMachine);
        }

        let wallRoom6 = new THREE.Mesh(new THREE.BoxGeometry(100, height, 770), wallMat);
        wallRoom6.position.x = 280 - 105 - 100 - 904 - 400 + 100 / 2;
        wallRoom6.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 50) + 818 + 770 / 2;
        addItem(origin, wallRoom6);

        let wallRoom7 = new THREE.Mesh(new THREE.BoxGeometry(3541, height, 100), wallMat);
        wallRoom7.position.x = 280 - 105 - 100 - 904 - 400 + 100 / 2 - 3541 / 2 + 50;
        wallRoom7.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 50) + 818 + 770 - 100 / 2;
        addItem(origin, wallRoom7);

        let wallRoom8 = new THREE.Mesh(new THREE.BoxGeometry(300, height, 2507), wallMat);
        wallRoom8.position.x = 280 - 105 - 100 - 904 - 400 + 100 / 2 - 3541 + 50 + 300 / 2;
        wallRoom8.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 50) + 818 + 770 + 2507 / 2;
        addItem(origin, wallRoom8);

        let wallRoom9 = new THREE.Mesh(new THREE.BoxGeometry(1900, height, 120), wallMat);
        wallRoom9.position.x = 280 - 105 - 100 - 904 - 400 - 1900 / 2;
        wallRoom9.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 100) / 2;
        addItem(origin, wallRoom9);

        let wallRoom10 = new THREE.Mesh(new THREE.BoxGeometry(300, height, 2180 + 120 + 5456), wallMat);
        wallRoom10.position.x = 280 - 105 - 100 - 904 - 400 - 1900 - 300 / 2;
        wallRoom10.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 100) / 2 - (2180 + 120 + 5456) / 2 + 2180;
        addItem(origin, wallRoom10);

        let wallRoom11 = new THREE.Mesh(new THREE.BoxGeometry(807 + 300, height, 410), wallMat);
        wallRoom11.position.x = 280 - 105 - 100 - 904 - 400 - 1900 - 300 + 807 / 2 + 300 - 300 / 2;
        wallRoom11.position.z = -360 - 300 - 914 - 100 - 100 + 100 / 2 + (856 + 1250 + 100) / 2 + 2180 + 410 / 2;
        addItem(origin, wallRoom11);

        let wallCenter4 = new THREE.Mesh(new THREE.BoxGeometry(100, height, 3031), wallMat);
        wallCenter4.position.x = 280 - 100 / 2;
        wallCenter4.position.z = -360 - 300 - 914 - 3031 / 2;
        addItem(origin, wallCenter4);

        let wallCenter5 = new THREE.Mesh(new THREE.BoxGeometry(250, height, 250 + 1267 + 50), wallMat);
        wallCenter5.position.x = 280 - 100 + 260 / 2;
        wallCenter5.position.z = -360 - 300 - 914 - 3031 - (250 + 1267 + 50) / 2;
        addItem(origin, wallCenter5);

        let wallCenter6 = new THREE.Mesh(new THREE.BoxGeometry(1957 + 250 + 1460 + 3610 + 400, height, 50), windowMat);
        wallCenter6.position.x = 280 - 100 + 260 + (1957 + 250 + 1460 + 3110) / 2 - 3610 + 400;
        wallCenter6.position.z = -360 - 300 - 914 - 3031 - (250 + 1267) - 50 / 2;
        addItem(origin, wallCenter6);

        let wallCenter7 = new THREE.Mesh(new THREE.BoxGeometry(740, height, 350), wallMat);
        wallCenter7.position.x = 280 - 100 + 260 + (1957 + 250 + 1460) + 740 / 2;
        wallCenter7.position.z = -360 - 300 - 914 - 3031 - (250 + 1267) + 350 / 2;
        addItem(origin, wallCenter7);


        let wallLeft = new THREE.Mesh(new THREE.BoxGeometry(1510, height, 120), wallMat);
        wallLeft.position.x = wallWentLength + 1510 / 2;
        wallLeft.position.z = 120 / 2;
        addItem(origin, wallLeft);


        // let wallBot2 = new THREE.Mesh(new THREE.BoxGeometry(100, height - 2075, 913), wallMat);
        // wallBot2.position.y = height / 2 - (height - 2075) / 2;
        // wallBot2.position.x = 100 / 2;
        // wallBot2.position.z = wallWentWidth + 1545 + 913 / 2;
        // addItem(origin, wallBot2);
        //
        // let wallBot3 = new THREE.Mesh(new THREE.BoxGeometry(100, height, 85), wallMat);
        // wallBot3.position.x = 100 / 2;
        // wallBot3.position.z = wallWentWidth + 1545 + 913 + 85 / 2;
        // addItem(origin, wallBot3);

        let wallBot4 = new THREE.Mesh(new THREE.BoxGeometry(645 + 120, height, 100), wallMat);
        wallBot4.position.x = 100 - (645 + 120) / 2;
        wallBot4.position.z = wallWentWidth + 1545 + 913 + 85 + 100 / 2;
        addItem(origin, wallBot4);

        let wallBotSmall1 = new THREE.Mesh(new THREE.BoxGeometry(440, height, 100), wallMat);
        wallBotSmall1.position.x = 100 - 645 - 120 - 440 / 2;
        wallBotSmall1.position.z = wallWentWidth + 1545 + 913 + 85 + 100 / 2;
        addItem(origin, wallBotSmall1);

        let wallBotSmall12 = new THREE.Mesh(new THREE.BoxGeometry(819, height - 2075, 100), wallMat);
        wallBotSmall12.position.y = height / 2 - (height - 2075) / 2;
        wallBotSmall12.position.x = 100 - 645 - 120 - 440 - 819 / 2;
        wallBotSmall12.position.z = wallWentWidth + 1545 + 913 + 85 + 100 / 2;
        addItem(origin, wallBotSmall12);

        let wallBotSmall13 = new THREE.Mesh(new THREE.BoxGeometry(635, height, 100), wallMat);
        wallBotSmall13.position.x = 100 - 645 - 120 - 440 - 819 - 635 / 2;
        wallBotSmall13.position.z = wallWentWidth + 1545 + 913 + 85 + 100 / 2;
        addItem(origin, wallBotSmall13);

        let wallSmallBathWent = new THREE.Mesh(new THREE.BoxGeometry(400, height, 800), wallMat);
        wallSmallBathWent.position.x = 100 - 645 - 120 - 440 - 819 - 635 + 400 / 2;
        wallSmallBathWent.position.z = wallWentWidth + 1545 + 913 + 85 + 100 + 800 / 2 + 445;
        addItem(origin, wallSmallBathWent);

        let wallSmallBathMini = new THREE.Mesh(new THREE.BoxGeometry(120, height, 445), wallMat);
        wallSmallBathMini.position.x = 100 - 645 - 120 - 440 - 819 - 635 + 120 / 2;
        wallSmallBathMini.position.z = wallWentWidth + 1545 + 913 + 85 + 100 + 445 / 2;
        addItem(origin, wallSmallBathMini);
        {
            let smallBathOrigin = new THREE.Object3D();
            smallBathOrigin.position.x = 100 - 645 - 120 - 440 - 819 - 635 + 400;
            smallBathOrigin.position.z = wallWentWidth + 1545 + 913 + 85 + 100 + 800 / 2 + 445 + 800 / 2;
            addItem(origin, smallBathOrigin);

            let toiletSmall = new THREE.Mesh(new THREE.BoxGeometry(700, 600, 550), new THREE.MeshStandardMaterial({color: 'green', side: THREE.DoubleSide}));
            toiletSmall.rotation.y = Math.PI / 4;
            toiletSmall.position.y = -height / 2 + 550 / 2;
            toiletSmall.position.x = (800 / 2) * Math.sin(Math.PI / 4);
            toiletSmall.position.z = -(800 / 2) * Math.cos(Math.PI / 4);
            addItem(smallBathOrigin, toiletSmall);

            let showerSmall = new THREE.Mesh(new THREE.BoxGeometry(900, 50, 1240), new THREE.MeshStandardMaterial({color: 'blue', side: THREE.DoubleSide}));
            showerSmall.position.y = -height / 2 + 25;
            showerSmall.position.x = 900 / 2 + 1250;
            showerSmall.position.z = -1240 / 2;
            addItem(smallBathOrigin, showerSmall);

            let showerSmallWall = new THREE.Mesh(new THREE.BoxGeometry(20, 2000, 600), new THREE.MeshStandardMaterial({color: 'blue', side: THREE.DoubleSide, wireframe: true}));
            showerSmallWall.position.y = -height / 2 + 1000;
            showerSmallWall.position.x = 900 / 2 + 1250 - 15 - 400;
            showerSmallWall.position.z = -1240 / 2 - 600 / 2;
            addItem(smallBathOrigin, showerSmallWall);
        }

        let wallShoerMoveable = new THREE.Mesh(new THREE.BoxGeometry(120, height, 1343), wallMat);
        wallShoerMoveable.position.x = 100 - 645 - 120 / 2 + 645;
        wallShoerMoveable.position.z = wallWentWidth + 1545 + 913 + 85 + 1343 / 2;
        addItem(origin, wallShoerMoveable);

        let rightLength = 2761 + 120 + 1404 + 440 + 120 + 2082 + 150;
        let wallRight = new THREE.Mesh(new THREE.BoxGeometry(rightLength, height, 300), wallMat);
        wallRight.position.x = 100 - 645 - 120 - rightLength / 2 + 100 + 2761 + 210;
        wallRight.position.z = wallWentWidth + 1545 + 913 + 85 + 1343 + 300 / 2;
        addItem(origin, wallRight);

        let wallWindow1Origin = new THREE.Object3D();
        wallWindow1Origin.rotation.y = Math.PI / 180 * 255.5;
        wallWindow1Origin.position.x = 100 - 645 - 120 + 100 + 2761;
        wallWindow1Origin.position.z = wallWentWidth + 1545 + 913 + 85 + 1343;
        addItem(origin, wallWindow1Origin);

        let wallWindow1 = new THREE.Mesh(new THREE.BoxGeometry(685, height, 300), wallMat);
        wallWindow1.position.x = -685 / 2;
        wallWindow1.position.z = -300 / 2;
        addItem(wallWindow1Origin, wallWindow1);

        {
            let windowKitchen = new THREE.Mesh(new THREE.BoxGeometry(2871, height, 50), windowMat);
            windowKitchen.position.x = -685 - 2871 / 2;
            windowKitchen.position.z = -255 - 50 / 2;
            addItem(wallWindow1Origin, windowKitchen);
        }

        let wallWindow3 = new THREE.Mesh(new THREE.BoxGeometry(525, height, 300), wallMat);
        wallWindow3.position.x = -685 - 2871 - 525 / 2;
        wallWindow3.position.z = -300 / 2;
        addItem(wallWindow1Origin, wallWindow3);

        let wallWindow4 = new THREE.Mesh(new THREE.BoxGeometry(390 + 120 + 483, height, 345), wallMat);
        wallWindow4.position.x = -685 - 2871 - 525 - (390 + 120 + 483) / 2;
        wallWindow4.position.z = -345 / 2 + 45;
        addItem(wallWindow1Origin, wallWindow4);

        let wallWindow5 = new THREE.Mesh(new THREE.BoxGeometry(920, height, 300), wallMat);
        wallWindow5.position.x = -685 - 2871 - 525 - (390 + 120 + 483) - 920 / 2;
        wallWindow5.position.z = -300 / 2;
        addItem(wallWindow1Origin, wallWindow5);

        let wallWindow6 = new THREE.Mesh(new THREE.BoxGeometry(2858, height, 50), windowMat);
        wallWindow6.position.x = -685 - 2871 - 525 - (390 + 120 + 483) - 920 - 2858 / 2;
        wallWindow6.position.z = -255 - 50 / 2;
        addItem(wallWindow1Origin, wallWindow6);

        let wallWindow7 = new THREE.Mesh(new THREE.BoxGeometry(2040, height, 300), wallMat);
        wallWindow7.position.x = -685 - 2871 - 525 - (390 + 120 + 483) - 920 - 2858 - 2040 / 2;
        wallWindow7.position.z = -300 / 2;
        addItem(wallWindow1Origin, wallWindow7);

        {
            let kitchenOrigin = new THREE.Object3D();
            // let kitchenOrigin = new THREE.Mesh(new THREE.BoxGeometry(10, height * 2, 10), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
            kitchenOrigin.position.z = wallWentWidth;
            kitchenOrigin.position.x = 100;
            addItem(origin, kitchenOrigin);

            // let wallBot = new THREE.Mesh(new THREE.BoxGeometry(100, height, 1545 * 0 + 600), wallMat);
            // wallBot.position.x = 100 / 2;
            // wallBot.position.z = wallWentWidth + (1545 * 0 + 600) / 2;
            // addItem(origin, wallBot);

            // let freeze = new THREE.Mesh(new THREE.BoxGeometry(600, height, 600), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
            // freeze.position.x = 600 / 2;
            // freeze.position.z = 600 / 2;
            // addItem(kitchenOrigin, freeze);
            //
            // let botKitchen = new THREE.Mesh(new THREE.BoxGeometry(2000, 900, 600), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
            // botKitchen.position.y = -height / 2 + 900 / 2;
            // botKitchen.position.x = 600 + 2000 / 2;
            // botKitchen.position.z = 600 / 2;
            // addItem(kitchenOrigin, botKitchen);

            {
                // let freeze2 = new THREE.Mesh(new THREE.BoxGeometry(600, height, 600), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
                // freeze2.position.x = 600 / 2;
                // freeze2.position.z = 600 / 2 + 3904 - 1200;
                // addItem(kitchenOrigin, freeze2);

                let freeze3 = new THREE.Mesh(new THREE.BoxGeometry(600, height, 600), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
                freeze3.position.x = 600 / 2 + 1765;
                freeze3.position.z = 600 / 2 - 513;
                addItem(kitchenOrigin, freeze3);

                let freeze4 = new THREE.Mesh(new THREE.BoxGeometry(600, height, 600), new THREE.MeshStandardMaterial({color: 0xBBBBBB, side: THREE.DoubleSide}));
                freeze4.position.x = 600 / 2 + 1765 + 600;
                freeze4.position.z = 600 / 2 - 513;
                addItem(kitchenOrigin, freeze4);

                let freeze5 = new THREE.Mesh(new THREE.BoxGeometry(250, height - 10, 600), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
                freeze5.position.x = 250 / 2 + 1765 + 1200;
                freeze5.position.z = 600 / 2 - 513;
                addItem(kitchenOrigin, freeze5);

                let botKitchen2 = new THREE.Mesh(new THREE.BoxGeometry(2116, 900, 600), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
                botKitchen2.position.y = -height / 2 + 900 / 2;
                botKitchen2.position.x = 2116 / 2;
                botKitchen2.position.z = 600 / 2 + 3904 - 600;
                addItem(kitchenOrigin, botKitchen2);

                let cookingKitchen = new THREE.Mesh(new THREE.BoxGeometry(560, 50, 560), new THREE.MeshStandardMaterial({color: 0x333333, side: THREE.DoubleSide}));
                cookingKitchen.position.y = -height / 2 + 900;
                cookingKitchen.position.x = 600 / 2;
                cookingKitchen.position.z = 600 / 2 + 3904 - 600;
                addItem(kitchenOrigin, cookingKitchen);

                let washingKitchen = new THREE.Mesh(new THREE.BoxGeometry(560, 50, 560), new THREE.MeshStandardMaterial({color: 0x777777, side: THREE.DoubleSide}));
                washingKitchen.position.y = -height / 2 + 900;
                washingKitchen.position.x = 2116 - 600 / 2 - 200;
                washingKitchen.position.z = 600 / 2 + 3904 - 600;
                addItem(kitchenOrigin, washingKitchen);

                let topKitchen2 = new THREE.Mesh(new THREE.BoxGeometry(2116, 1200, 350), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
                topKitchen2.position.y = height / 2 - 1200 / 2;
                topKitchen2.position.x = 2116 / 2;
                topKitchen2.position.z = 3904 - 350 / 2;
                addItem(kitchenOrigin, topKitchen2);

                let microOwen = new THREE.Mesh(new THREE.BoxGeometry(600, 350, 50), new THREE.MeshStandardMaterial({color: 0x777777, side: THREE.DoubleSide}));
                microOwen.position.y = height / 2 - 1200 + 350 / 2 + 30;
                microOwen.position.x = 2116 / 2;
                microOwen.position.z = 3904 - 350;
                addItem(kitchenOrigin, microOwen);

                let wingKitchen = new THREE.Mesh(new THREE.BoxGeometry(1300, 50, 500), new THREE.MeshStandardMaterial({color: 0xCCCCCC, side: THREE.DoubleSide}));
                wingKitchen.position.y = -height / 2 + 900 - 50 / 2;
                wingKitchen.position.x = 1300 / 2 - 1300;
                wingKitchen.position.z = 500 / 2 - 200;
                addItem(wallWindow1Origin, wingKitchen);

                {
                    let sofaKitchen = new THREE.Mesh(new THREE.BoxGeometry(1600, 500, 500), new THREE.MeshStandardMaterial({color: 0xd4a46e, side: THREE.DoubleSide}));
                    sofaKitchen.position.y = -height / 2 + 500 / 2;
                    sofaKitchen.position.x = 1600 / 2 + 50;
                    sofaKitchen.position.z = 500 / 2;
                    addItem(kitchenOrigin, sofaKitchen);

                    let sofaKitchenTop = new THREE.Mesh(new THREE.BoxGeometry(1600, 400, 100), new THREE.MeshStandardMaterial({color: 0xd4a46e, side: THREE.DoubleSide}));
                    sofaKitchenTop.position.y = 400;
                    // sofaKitchenTop.position.x = 1600 / 2 + 50;
                    sofaKitchenTop.position.z = -500 / 2 + 100 / 2;
                    addItem(sofaKitchen, sofaKitchenTop);
                }
                {
                    let tableKitchen2 = new THREE.Mesh(new THREE.BoxGeometry(700, 50, 1200), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
                    tableKitchen2.rotation.y = Math.PI / 2;
                    tableKitchen2.position.y = -height / 2 + 800 - 50 / 2;
                    tableKitchen2.position.x = 700 / 2 + 400 + 75;
                    tableKitchen2.position.z = 1200 / 2 + 400;
                    addItem(kitchenOrigin, tableKitchen2);

                    let leg1 = new THREE.Mesh(new THREE.BoxGeometry(50, 760, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
                    leg1.position.y = -760 / 2;
                    leg1.position.x = 700 / 2 - 45;
                    leg1.position.z = 1200 / 2 - 45;
                    addItem(tableKitchen2, leg1);

                    let leg2 = new THREE.Mesh(new THREE.BoxGeometry(50, 760, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
                    leg2.position.y = -760 / 2;
                    leg2.position.x = -700 / 2 + 45;
                    leg2.position.z = -1200 / 2 + 45;
                    addItem(tableKitchen2, leg2);

                    let leg3 = new THREE.Mesh(new THREE.BoxGeometry(50, 760, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
                    leg3.position.y = -760 / 2;
                    leg3.position.x = -700 / 2 + 45;
                    leg3.position.z = 1200 / 2 - 45;
                    addItem(tableKitchen2, leg3);

                    let leg4 = new THREE.Mesh(new THREE.BoxGeometry(50, 760, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
                    leg4.position.y = -760 / 2;
                    leg4.position.x = 700 / 2 - 45;
                    leg4.position.z = -1200 / 2 + 45;
                    addItem(tableKitchen2, leg4);

                    let chair1 = createChair();
                    chair1.rotation.y = -Math.PI;
                    chair1.position.y = -500 / 2;
                    chair1.position.z = -500;
                    addItem(tableKitchen2, chair1);

                    let chair2 = createChair();
                    chair2.rotation.y = -Math.PI / 2;
                    chair2.position.y = -500 / 2;
                    chair2.position.x = 50 / 2 - 250;
                    addItem(tableKitchen2, chair2);

                    let chair3 = createChair();
                    chair3.position.y = -500 / 2;
                    chair3.position.z = 500;
                    addItem(tableKitchen2, chair3);
                }
            }
        }

        let floor = new THREE.Mesh(new THREE.PlaneBufferGeometry(58000, 58000, 10, 10), new THREE.MeshStandardMaterial({map: null, side: THREE.DoubleSide, wireframe: wireframe}));
        floor.rotation.x = -Math.PI / 2;
        floor.position.z = 1400;
        floor.position.x = 1400;

        if (visibility["floor"] === 1) {
            addItem(room, floor);
        }

        room.position.x = -100;
        room.position.z = -400;
        room.rotation.y = -Math.PI / 18 * 37.5;

        scene.add(room);
    }

    function createChair() {
        let width = 500;
        let height = 500;
        let chair1 = new THREE.Mesh(new THREE.BoxGeometry(width, 50, width), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
        let spin = new THREE.Mesh(new THREE.BoxGeometry(width, 500, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
        spin.position.y = -height / 2 + 500;
        spin.position.x = 0;
        spin.position.z = width / 2 - 25;
        addItem(chair1, spin);

        let leg1 = new THREE.Mesh(new THREE.BoxGeometry(50, height, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
        leg1.position.y = -height / 2;
        leg1.position.x = width / 2 - 45;
        leg1.position.z = width / 2 - 45;
        addItem(chair1, leg1);

        let leg2 = new THREE.Mesh(new THREE.BoxGeometry(50, height, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
        leg2.position.y = -height / 2;
        leg2.position.x = -width / 2 + 45;
        leg2.position.z = -width / 2 + 45;
        addItem(chair1, leg2);

        let leg3 = new THREE.Mesh(new THREE.BoxGeometry(50, height, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
        leg3.position.y = -height / 2;
        leg3.position.x = -width / 2 + 45;
        leg3.position.z = width / 2 - 45;
        addItem(chair1, leg3);

        let leg4 = new THREE.Mesh(new THREE.BoxGeometry(50, height, 50), new THREE.MeshStandardMaterial({color: 'brown', side: THREE.DoubleSide}));
        leg4.position.y = -height / 2;
        leg4.position.x = width / 2 - 45;
        leg4.position.z = -width / 2 + 45;
        addItem(chair1, leg4);

        return chair1;
    }

    function addItem(parent, child) {
        child.transparent = true;
        child.castShadow = true;
        child.receiveShadow = true;
        parent.add(child);
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);
        controls.update();
    }

    function animate() {
        requestAnimationFrame(animate);
        render();
    }

    function render() {
        renderer.render(scene, camera);
    }

</script>

</body>
</html>
